import { nanoid } from "nanoid";
import { Lang, getLang } from "../locales";
import { ChatMessage, DEFAULT_TOPIC } from "./chat";
import { ModelConfig, useAppConfig } from "./configs";

export const DEFAULT_MASK_AVATAR = "gpt-bot";
export type Mask = {
  id: string;
  createdAt: number;
  avatar: string;
  name: string;
  hideContext?: boolean;
  context: ChatMessage[];
  syncGlobalConfig?: boolean;
  modelConfig: ModelConfig;
  lang: Lang;
  builtin: boolean;
};
export const createEmptyMask = () =>
  ({
    id: nanoid(),
    avatar: DEFAULT_MASK_AVATAR,
    name: DEFAULT_TOPIC,
    context: [],
    syncGlobalConfig: true, // use global config as default
    modelConfig: { ...useAppConfig.getState().modelConfig },
    lang: getLang(),
    builtin: false,
    createdAt: Date.now(),
  } as Mask);
